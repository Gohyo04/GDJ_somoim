<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <!-- mapper namespace는 비우면 에러 -->
  <mapper namespace="com.somoim.app.moim.MoimDAO">
  	<select id="getList" parameterType="MemberDTO" resultMap="listResult">
  		SELECT *
		FROM MOIM 
			 LEFT JOIN
			 MOIMMEMBER
			 USING (MOIMNUM)
			 WHERE USERNAME = #{userName}
  	</select>
  	<resultMap type="MoimDTO" id="listResult">
  		<id column="MOIMNUM" property="moimNum"/>
  		<result column="MOIMNAME" property="moimName"/>
  		<result column="MOIMHEAD" property="moimHead"/>
  		<result column="MOIMREGION" property="moimRegion"/>
  		<result column="MOIMCATEGORY" property="moimCategory"/>
  		<result column="MOIMMEMCOUNT" property="moimMemCount"/>
  		<result column="MOIMDATE" property="moimDate"/>
  		<association property="moimMemberDTO" javaType="MoimMemberDTO">
	  		<id column="USERNAME" property="userName"/>
	  		<result column="MOIMROLENUM" property="moimRoleDTO"/>
	  		<result column="MOIMNUM" property="moimDTOs"/>
	  		<result column="JOINDATE" property="joinDate"/>
  		</association>
  	</resultMap>
  
  </mapper>